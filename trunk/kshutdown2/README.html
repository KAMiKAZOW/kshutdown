<!DOCTYPE html>
<html lang="en">
<head>
	<title>KShutdown - README</title>
	<meta charset="UTF-8" />
	<style type="text/css">
	body {
		background-color: white;
		font-family: sans-serif;
		margin-left: 5%;
		margin-right: 5%;
		padding-left: 5%;
		padding-right: 5%;
	}
	
	code, pre {
		background-color: #eeeeee;
		font-size: larger;
		padding: 2px;
	}

	h2 {
		color: #009900;
		margin-top: 2em;
	}
	
	h4 {
		color: #990000;
	}
	
	p.footer {
		font-size: smaller;
	}
	
	table {
		border: 1px solid black;
		border-collapse: collapse;
	}
	
	td {
		border: 1px solid black;
		padding: 4px;
	}
	
	td.build {
		font-weight: bold;
	}

	td.na {
		background-color: #BFD9FF;
		text-align: center;
	}
	
	td.ok {
		background-color: #D8E8C2;
		text-align: center;
	}
	
	td.ok:hover {
		background-color: #FFFFBF;
		cursor: help;
	}
	
	td.test {
		background-color: orange;
		text-align: center;
	}

	td.wip {
		background-color: #F9CCCA;
		text-align: center;
	}
	
	thead td {
		font-weight: bold;
		text-align: center;
	}

	table#supported_table thead td {
		width: 10%;
	}
	</style>
</head>
<body>

<h1>KShutdown - README</h1>

<p>A graphical shutdown utility for Linux and Windows</p>

<p>
Visit <a href="http://kshutdown.sourceforge.net/">KShutdown Home Page</a> and
<a href="http://sourceforge.net/p/kshutdown/wiki/Home/">Wiki</a> for more info.
</p>

<h2>Table of Contents</h2>
<ul>
	<li><a href="#kdevsqt">KDE Build vs. Qt Build</a></li>
	<li><a href="#kde4linux">KDE Build @ Linux</a></li>
	<li><a href="#qt4linux">Qt Build @ Linux</a></li>
	<li><a href="#qt4windows">Qt Build @ Windows</a></li>
	<li><a href="#qthaiku">Qt Build @ Haiku</a></li>
	<li><a href="#supported">Supported Functions/Platforms</a></li>
	<li><a href="#compatibility">Compatibility</a></li>
	<li><a href="http://sourceforge.net/p/kshutdown/wiki/Credits/">Credits</a></li>
	<li><a href="http://kshutdown.sourceforge.net/contact.html">Support</a></li>
	<li><a href="http://www.gnu.org/copyleft/gpl.html">License</a> (GPL)</li>
</ul>

<h2 id="kdevsqt">KDE Build vs. Qt Build</h2>

<table>

<thead>
<tr>
	<td></td>
	<td>KDE Build</td>
	<td>Qt Build</td>
</tr>
</thead>

<tbody>

<tr>
	<td>Summary</td>
	<td>A KShutdown version compiled using KDE4 libraries (super integration with KDE platform + extra features)</td>
	<td>A KShutdown version compiled without KDE4 libraries (Qt only, for Xfce, GNOME, etc.)</td>
</tr>

<tr>
	<td>Compilation Script</td>
	<td>./Setup-kde4.sh</td>
	<td>./Setup-qt4.sh</td>
</tr>

<tr>
	<td>Required Libraries</td>
	<td>libqtgui4, libqt4-dbus,<br><b>libkworkspace4</b>, <b>base KDE libraries</b></td>
	<td>libqtgui4, libqt4-dbus</td>
</tr>

<tr>
	<td>Menu Shortcut Name</td>
	<td>KShutdown</td>
	<td>KShutdown<b>/Qt</b></td>
</tr>

<tr>
	<td>Default Program Location (after "make install")</td>
	<td>/usr/bin/kshutdown</td>
	<td>/usr/bin/kshutdown<b>-qt</b></td>
</tr>

<tr>
	<td colspan="3" style="font-weight: bold">Dev Info</td>
</tr>

<tr>
	<td>C++ #define</td>
	<td><code>KS_NATIVE_KDE</code></td>
	<td><code>KS_PURE_QT</code></td>
</tr>

<tr>
	<td>Build System</td>
	<td><a href="http://www.cmake.org/">CMake</a> (CMakeLists.txt files)</td>
	<td><a href="http://qt-project.org/doc/qt-4.8/qmake-manual.html">QMake</a> (src/src.pro file)</td>
</tr>

<tr>
	<td>Language Translation System (input: po/*.po)</td>
	<td>Gettext (output: build.tmp/po/*.mo)</td>
	<td>Gettext (output: src/i18n/*.qm), kshutdown.qrc</td>
</tr>

</tbody>

</table>

<p>See <a href="#supported">Supported Functions/Platforms</a> table for more info.</p>

<h2 id="kde4linux">KDE Build @ Linux</h2>

<h3>Minimal Requirements</h3>
<ol>
	<li>KDE 4.4+</li>
	<li>Qt 4.8+ or Qt 5.x</li>
</ol>

<h3>Compilation &amp; Installation</h3>
<ol>
	<li>Additional requirements: installed <code>"kdelibs-dev"</code> package, CMake 2.4, and Gettext Utilities</li>
	<li>To compile and install KShutdown run: <code>./Setup-kde4.sh</code></li>
	<li>To change the installation directory (prefix) run: <code>./Setup-kde4.sh "/your/prefix/dir"</code></li>
	<li>Clang support (an alternative C++ compiler):
		<ul>
		<li><code>export CXX=/usr/bin/clang++</code></li>
		<li><code>export CXXFLAGS=-march=i686</code> (in case of <i>Illegal Instruction</i> errors on some hardware)</li>
		<li>Go to step 2.</li>
		</ul>
	</li>
</ol>

<h3>Common Errors</h3>

<h4>CMake Error at /usr/share/cmake-2.6/Modules/FindKDE4.cmake:72</h4>
<pre>
CMake Error at /usr/share/cmake-2.6/Modules/FindKDE4.cmake:72 (MESSAGE):
ERROR: cmake/modules/FindKDE4Internal.cmake not found in
...;/usr/lib/kde4/share/kde4/apps
</pre>
<p>Install "kdelibs-dev" (sometimes called kdelibs5-dev) and "kdebase-workspace-dev" packages for your KDE version.</p>

<h4>CMake Error at (...) Phonon library or includes NOT found!</h4>
<p>This may happed after Ubuntu upgrade
even if required Phonon files are already installed. [<a href="http://osdir.com/ml/digikam-users/2009-11/msg00024.html">Solution</a>]</p>

<h4>"pushd: not found" error</h4>
<p>
Try to run
<code>./Setup-kde4.sh</code> and
<code>cd build.tmp; sudo make install</code> instead of 
<code>sudo sh Setup-kde4.sh</code>
</p>

<h3>Compilation &amp; Installation (alternative method; for geeks and nerds only)</h3>
<p>
<i>BUILDTYPE</i> can be <code>Release</code> or <code>Debug</code>.
You can change the installation directory (prefix) by setting the <code>CMAKE_INSTALL_PREFIX</code> environment variable.
To display default prefix for KDE applications, run <code>kde4-config --prefix</code>.
</p>
<ol>
	<li>Create output directory: <code>mkdir build &amp;&amp; cd build</code></li>
	<li>Generate Makefiles: <code>cmake -DCMAKE_BUILD_TYPE=<i>BUILDTYPE</i> -DCMAKE_INSTALL_PREFIX="/usr/local" ..</code></li>
	<li>Compile: <code>make</code></li>
	<li>Make coffee</li>
	<li>Install: <code>make install</code></li>
</ol>

<h2 id="qt4linux">Qt Build @ Linux</h2>

<p><b>Note:</b> Some functions may be unavailable in this build.
See <a href="#supported">Qt Build</a> table for more info.</p>

<h3>Minimal Requirements</h3>
<ol>
	<li>Qt 4.8+ or Qt 5.x (KDE libraries are <b>not</b> required)</li>
</ol>

<h3>Compilation &amp; Installation</h3>
<ol>
	<li>To compile KShutdown run: <code>./Setup-qt4.sh</code></li>
	<li>Installation is not required</li>
	<li>Clang support (an alternative C++ compiler):
		<ol>
		<li><code>cd src; qmake -spec /usr/share/qt4/mkspecs/unsupported/linux-clang/</code></li>
		<li><code>make</code></li>
		</ol>
	</li>
</ol>

<h2 id="qt4windows">Qt Build @ Windows</h2>

<p>Note: You can <a href="http://kshutdown.sourceforge.net/download.html">download</a> a binary (already compiled) KShutdown version for Windows.</p>

<h3>Minimal Requirements (for compilation)</h3>
<ol>
	<li>MinGW - Minimalist GNU for Windows
		<ul>
		<li>Download and launch <a href="http://sourceforge.net/projects/mingw/files/Installer/mingw-get-inst/">MinGW Installer</a></li>
		<li>Choose <code>C:\mingw</code> as the install directory (default)</li>
		<li>Install <b>C++ Compiler</b> component</li>
		</ul>
	</li>
	<li><a href="http://qt-project.org/downloads">Qt libraries for Windows (minGW, LGPL version)</a> 4.8+/5.x</li>
	<li><a href="http://nsis.sourceforge.net/">Nullsoft Scriptable Install System</a> (NSIS)</li>
	<li>Windows XP/Vista/7/8 or compatible (including <a href="http://www.winehq.org/">Wine</a>)</li>
</ol>

<h3>Compilation &amp; Installation</h3>
<ul>
	<li>To compile and install KShutdown run: <code>Setup-qt4.bat</code> (this will rebuild both portable and installable version)</li>
	<li>To quick compile and test:
		<ol>
		<li>Launch "Command Prompt" (<code>cmd.exe</code>)</li>
		<li><code>cd your-kshutdown-source-dir\src</code></li>
		<li>Run <code>c:\qt\&lt;your-qt-version&gt;\bin\qtvars.bat</code> (it should print <i>Setting up a MinGW/Qt only environment...</i>)</li>
		<li>Run <code>make &amp;&amp; release\kshutdown-qt.exe</code></li>
		<li>Right-click <code>kshutdown.nsi</code> and select <i>Compile NSIS Script</i> to build and test installer</li>
		</ol>
	</li>
	<li><b>Experimental:</b> To compile KShutdown under Wine/Linux run: <code>./Setup-wine.sh</code></li>
</ul>

<h2 id="qthaiku">Qt Build @ Haiku</h2>

<p>Requires KShutdown 3.0 Beta 6 or later.</p>

<h3>Compilation</h3>
<ol>
	<li>Download and install <a href="http://qt-haiku.ru/">Qt for Haiku</a></li>
	<li>Download and unpack <a href="http://kshutdown.sourceforge.net/download.html">KShutdown source</a></li>
	<li>Open terminal with KShutdown source: <code>cd src</code></li>
	<li>Change the default C++ compiler to GCC 4: <code>setgcc gcc4</code></li>
	<li>Create Makefiles: <code>qmake</code></li>
	<li>Build "kshutdown-qt" binary: <code>make</code></li>
</ol>

<h2 id="supported">Supported Functions/Platforms</h2>

<div>
<table id="supported_table" style="width: 100%">

<thead>

<tr>
<td>Turn Off Computer**</td>
<td>Restart Computer**</td>
<td>Suspend</td>
<td>Hibernate</td>
<td>Lock Screen</td>
<td>Logout</td>
<td>Extras</td>
<td>Waiting for a selected application</td>
<td>Inactivity Monitor</td>
</tr>

</thead>

<tfoot>

<tr><td colspan="9" style="font-weight: bold">Legend</td></tr>

<tr><td class="test">TEST</td><td colspan="8">Should work, still testing ;)</td></tr>
<tr><td class="ok">OK<!-- TODO: implementation details --></td><td colspan="8">Done (hover an item to display implementation details)</td></tr>
<tr><td class="na">N/A</td><td colspan="8">Function is not available on this platform/KShutdown version</td></tr>
<tr><td class="wip">TODO/FIXME</td><td colspan="8">Work In Progress - to be implemented in a future...</td></tr>

<tr><td>CLI</td><td colspan="8">Function available via Command Line (example: kshutdown --lock)</td></tr>
<tr><td>Windows</td><td colspan="8">Microsoft Windows XP/Vista/7/8 or compatible</td></tr>
<tr><td>*</td><td colspan="8"><i>KDE Build</i> not supported</td></tr>
<tr><td>**</td><td colspan="8">D-Bus commands should work with <abbr title="GNOME Display Manager">GDM</abbr>, <abbr title="KDE Display Manager">KDM</abbr>, and LightDM</td></tr>

</tfoot>

<tbody>

<tr><td class="build" colspan="9"><a href="http://kde.org/">KDE</a> 4 (KDE Build)</td></tr>
<tr>
<td class="ok" title="KWorkSpace::requestShutDown/KWorkSpace::ShutdownModeForceNow, D-Bus (org.freedesktop.ConsoleKit, org.freedesktop.Hal)">OK</td>
<td class="ok" title="KWorkSpace::requestShutDown/KWorkSpace::ShutdownModeForceNow, D-Bus (org.freedesktop.ConsoleKit, org.freedesktop.Hal)">OK</td>
<td class="ok" title="D-Bus (org.freedesktop.UPower, org.freedesktop.Hal)">OK</td>
<td class="ok" title="D-Bus (org.freedesktop.UPower, org.freedesktop.Hal)">OK</td>
<td class="ok" title="D-Bus (org.freedesktop.ScreenSaver, org.kde.krunner), xdg-screensaver, xscreensaver-command">OK</td>
<td class="ok" title="KWorkSpace::requestShutDown/KWorkSpace::ShutdownModeForceNow">OK</td>
<td class="ok">OK</td>
<td class="ok" title="::kill(pid, 0)">OK, no CLI</td>
<td class="ok" title="D-Bus (org.freedesktop.ScreenSaver, org.kde.krunner)">OK</td>
</tr>

<tr><td class="build" colspan="9">Windows (Qt Build) *</td></tr>
<tr>
<td class="ok" title="::InitiateSystemShutdown">OK</td>
<td class="ok" title="::InitiateSystemShutdown">OK</td>
<td class="ok" title="::SetSuspendState">OK</td>
<td class="ok" title="::SetSuspendState">OK</td>
<td class="ok" title="::LockWorkStation">OK</td>
<td class="ok" title="::ExitWindowsEx">OK</td>
<td class="ok">OK</td>
<td class="wip">TODO</td>
<td class="ok" title="::GetLastInputInfo">OK</td>
</tr>

<tr><td class="build" colspan="9"><a href="http://www.xfce.org/">Xfce</a> 4.8 (Qt Build) *</td></tr>
<tr>
<td class="ok" title="D-Bus (org.freedesktop.ConsoleKit, org.freedesktop.Hal)">OK</td>
<td class="ok" title="D-Bus (org.freedesktop.ConsoleKit, org.freedesktop.Hal)">OK</td>
<td class="ok" title="D-Bus (org.freedesktop.UPower, org.freedesktop.Hal)">OK</td>
<td class="ok" title="D-Bus (org.freedesktop.UPower, org.freedesktop.Hal)">OK</td>
<td class="ok" title="xflock4, xdg-screensaver, xscreensaver-command">OK</td>
<td class="wip">FIXME</td>
<td class="test">TEST</td>
<td class="ok" title="::kill(pid, 0)">OK, no CLI</td>
<td class="wip">TODO</td>
</tr>

<tr><td class="build" colspan="9"><a href="http://en.wikipedia.org/wiki/LXDE">LXDE</a> (Qt Build) *</td></tr>
<tr>
<td class="ok" title="D-Bus (org.freedesktop.ConsoleKit, org.freedesktop.Hal)">OK</td>
<td class="ok" title="D-Bus (org.freedesktop.ConsoleKit, org.freedesktop.Hal)">OK</td>
<td class="ok" title="D-Bus (org.freedesktop.UPower, org.freedesktop.Hal)">OK</td>
<td class="ok" title="D-Bus (org.freedesktop.UPower, org.freedesktop.Hal)">OK</td>
<td class="ok" title="lxlock, xdg-screensaver, xscreensaver-command">OK</td>
<td class="ok" title="::kill(_LXSESSION_PID, SIGTERM)">OK</td>
<td class="test">TEST</td>
<td class="ok" title="::kill(pid, 0)">OK, no CLI</td>
<td class="wip">TODO</td>
</tr>

<tr><td class="build" colspan="9">KDE 4 (Qt Build)</td></tr>
<tr>
<td class="test">TEST</td>
<td class="test">TEST</td>
<td class="ok" title="D-Bus (org.freedesktop.UPower, org.freedesktop.Hal)">OK</td>
<td class="ok" title="D-Bus (org.freedesktop.UPower, org.freedesktop.Hal)">OK</td>
<td class="ok" title="D-Bus (org.freedesktop.ScreenSaver, org.kde.krunner), xdg-screensaver, xscreensaver-command">OK</td>
<td class="wip">TODO</td>
<td class="test">TEST</td>
<td class="ok" title="::kill(pid, 0)">OK, no CLI</td>
<td class="ok" title="D-Bus (org.freedesktop.ScreenSaver, org.kde.krunner)">OK</td>
</tr>

<tr><td class="build" colspan="9">GNOME 3 (Qt Build) *</td></tr>
<tr>
<td class="test">TEST</td>
<td class="test">TEST</td>
<td class="ok" title="D-Bus (org.freedesktop.UPower, org.freedesktop.Hal)">OK</td>
<td class="ok" title="D-Bus (org.freedesktop.UPower, org.freedesktop.Hal)">OK</td>
<td class="ok" title="gnome-screensaver-command">OK</td>
<td class="ok" title="gnome-session-quit">OK</td>
<td class="test">TEST</td>
<td class="ok" title="::kill(pid, 0)">OK, no CLI</td>
<td class="wip">TODO</td>
</tr>

<tr><td class="build" colspan="9"><a href="http://en.wikipedia.org/wiki/Unity_%28user_interface%29">Unity</a> (Qt Build) *</td></tr>
<tr>
<td class="test">TEST</td>
<td class="test">TEST</td>
<td class="ok" title="D-Bus (org.freedesktop.UPower, org.freedesktop.Hal)">OK</td>
<td class="ok" title="D-Bus (org.freedesktop.UPower, org.freedesktop.Hal)">OK</td>
<td class="ok" title="gnome-screensaver-command">OK</td>
<td class="ok" title="gnome-session-quit">OK</td>
<td class="test">TEST</td>
<td class="ok" title="::kill(pid, 0)">OK, no CLI</td>
<td class="wip">TODO</td>
</tr>

<tr><td class="build" colspan="9"><a href="http://www.enlightenment.org/">Enlightenment</a> (Qt Build) *</td></tr>
<tr>
<td class="test">TEST</td>
<td class="test">TEST</td>
<td class="ok" title="D-Bus (org.freedesktop.UPower, org.freedesktop.Hal)">OK</td>
<td class="ok" title="D-Bus (org.freedesktop.UPower, org.freedesktop.Hal)">OK</td>
<td class="ok" title="enlightenment_remote">OK</td>
<td class="ok" title="enlightenment_remote">OK</td>
<td class="test">TEST</td>
<td class="ok" title="::kill(pid, 0)">OK, no CLI</td>
<td class="wip">TODO</td>
</tr>

<tr><td class="build" colspan="9"><a href="http://razor-qt.org/">Razor-qt</a> (Qt Build) *</td></tr>
<tr>
<td class="test">TEST</td>
<td class="test">TEST</td>
<td class="test">TEST</td>
<td class="test">TEST</td>
<td class="wip">TODO</td>
<td class="wip">TODO</td>
<td class="test">TEST</td>
<td class="test">TEST</td>
<td class="wip">TODO</td>
</tr>

<tr><td class="build" colspan="9"><a href="https://www.haiku-os.org">Haiku</a> (Qt Build) *</td></tr>
<tr>
<td class="ok" title="shutdown">OK</td>
<td class="ok" title="shutdown -r">OK</td>
<td class="na">N/A</td>
<td class="na">N/A</td>
<td class="na">N/A</td>
<td class="na">N/A</td>
<td class="test">TEST</td>
<td class="wip">TODO</td>
<td class="wip">TODO</td>
</tr>

<tr><td class="build" colspan="9"><a href="http://openbox.org/">Openbox</a> (Qt Build) *</td></tr>
<tr>
<td class="wip" colspan="9">TODO (?)</td>
</tr>

<tr><td class="build" colspan="9"><a href="http://www.gnome.org/">GNOME</a> 2 (Qt Build) *</td></tr>
<tr>
<td class="wip" colspan="9">TODO (?)</td>
</tr>

<tr><td class="build" colspan="9">Mac OS X (Qt Build) *</td></tr>
<tr>
<td class="wip" colspan="9">TODO (?)</td>
</tr>

<tr><td class="build" colspan="9">KDE 3 (Qt Build) *</td></tr>
<tr>
<td class="wip" colspan="9">TODO (?); KShutDown 1.0.x exists but it's outdated and not supported...</td>
</tr>

</tbody>

</table>
</div>

<h2 id="compatibility">Compatibility with old KShutdown 1.0.x</h2>

<p>Some configuration and command line options in KShutdown 2.x
may be not fully compatible with the old KShutdown 1.0.x.</p>

<p class="footer">&copy; Konrad Twardowski</p>

</body>
</html>